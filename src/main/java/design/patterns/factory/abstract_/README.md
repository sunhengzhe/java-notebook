# 抽象工厂模式 Abstract Factory Pattern

抽象工厂模式与工厂方法模式相比，增加了 **产品等级结构** 和 **产品族** 的概念。

- 产品等级结构：抽象产品与具体产品之间构成了产品等级结构。如电视机类下有海尔电视机、三星电视机；冰箱类下有海尔电冰箱、三星电冰箱。
- 产品族：产品族是指由同一个工厂生产的，位于不同产品等级结构中的一组产品。如海尔电视机和海尔电冰箱为同一个产品族，他们都是海尔工厂生产的，但属于不同的产品等级结构。

个人理解抽象工厂模式和工厂方法模式非常像，区别就在于是否需要引入产品族。

## 角色

抽象工厂模式的角色和工厂方法是一样的，但是抽象产品类型增多了。

![](https://design-patterns.readthedocs.io/zh_CN/latest/_images/AbatractFactory.jpg)

## 开闭原则的倾斜性

“开闭原则”要求系统对扩展开放，对修改封闭，通过扩展达到增强其功能的目的。

对于涉及到多个产品族与多个产品等级结构的系统，其功能增强包括两方面：

- 增加产品族：对于增加新的产品族，抽象工厂模式很好的支持了“开闭原则”，对于新增加的产品族，只需要对应增加一个新的具体工厂即可，对已有代码无须做任何修改。
- 增加新的产品等级结构：对于增加新的产品等级结构，需要修改所有的工厂角色，包括抽象工厂类，在所有的工厂类中都需要增加生产新产品的方法，不能很好地支持“开闭原则”。

抽象工厂模式的这种性质称为“开闭原则”的倾斜性，抽象工厂模式以一种倾斜的方式支持增加新的产品，它为新产品族的增加提供方便，但不能为新的产品等级结构的增加提供这样的方便。

## 参考

- [知乎：抽象工厂模式和工厂模式的区别？](https://www.zhihu.com/question/20367734)

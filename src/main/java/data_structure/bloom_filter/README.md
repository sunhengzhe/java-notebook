# 布隆过滤器 Bloom Filter

布隆过滤器可以用于检索一个元素是否在一个集合中，但布隆过滤器不存储元素的值，所以空间效率和查询时间都比较高。

基本的布隆过滤器支持两个操作：

- add：添加元素到布隆过滤器中。
- test：用来判断元素是否在过滤器中，如果返回 false，代表 **一定** 不在过滤器中；如果返回 true，代表 **可能存在**。

也就是说，布隆过滤器是有一定的误识别率的，这个错误的概率与过滤器的大小、元素，以及使用率有关。

布隆过滤器有两个属性，一个是 bitmap 的长度 m，一个是哈希函数的数量 k。

add 一个元素时，对元素做 k 次哈希，求得 k 个位置，将这些位置置为 1。test 一个元素时，同样地对其做 k 次哈希，如果这 k 个位置都是 1，则说明这个元素可能在布隆过滤器中，任一个位置不为 0 则一定不在过滤器里面。

![](https://camo.githubusercontent.com/0f929fdbdb42685ecf5b2c25b68d46d0fb679c33/687474703a2f2f696d61676573323031352e636e626c6f67732e636f6d2f626c6f672f313033303737362f3230313730312f313033303737362d32303137303130363134333134313738342d313437353033313030332e706e67)

为什么有误识别率也很容易理解，因为求得的这 k 个位置很可能是别的元素置过的。
